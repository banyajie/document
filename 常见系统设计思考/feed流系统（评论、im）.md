**来源：**

https://developer.aliyun.com/article/224132

https://developer.aliyun.com/article/706808?spm=5176.54465.J_3626598450.3.588f2e0crHSSxI

**概念：**

-   Feed：Feed流中的每一条状态或者消息都是Feed，比如朋友圈中的一个状态就是一个Feed，微博中的一条微博就是一个Feed。
-   Feed流：持续更新并呈现给用户内容的信息流。每个人的朋友圈，微博关注页等等都是一个Feed流。
-   Timeline：Timeline其实是一种Feed流的类型，微博，朋友圈都是Timeline类型的Feed流，但是由于Timeline类型出现最早，使用最广泛，最为人熟知，有时候也用Timeline来表示Feed流。
-   关注页Timeline：展示其他人Feed消息的页面，比如朋友圈，微博的首页等。
-   个人页Timeline：展示自己发送过的Feed消息的页面，比如微信中的相册，微博的个人页等。

**特征：**

-   多账号内容流：Feed流系统中肯定会存在成千上万的账号，账号之间可以关注，取关，加好友和拉黑等操作。只要满足这一条，那么就可以当做Feed流系统来设计。
-   非稳定的账号关系：由于存在关注，取关等操作，所以系统中的用户之间的关系就会一直在变化，是一种非稳定的状态。
-   读写比例100:1：读写严重不平衡，读多写少，一般读写比例在10：1，甚至100：1以上。
-   消息必达性要求高：比如发送了一条朋友圈后，结果部分朋友看到了，部分朋友没看到，如果偏偏女朋友没看到，那么可能会产生很严重的感情矛盾，后果很严重。

**分类：**

-   Timeline：按发布的时间顺序排序，先发布的先看到，后发布的排列在最顶端，类似于微信朋友圈，微博等。这也是一种最常见的形式。产品如果选择Timeline类型，那么就是认为feed流中的feed不多。但是每一条feed都很重要。
-   Rank：按某个非时间的因子排序，一般是按照用户的喜好度排序，用户最喜欢的排在最前面，次喜欢的排在后面。这种一般假定用户可能看到的Feed非常多，而用户花费在这里的时间有限，那么就为用户选择出用户最想看的Top N结果，场景的应用场景有图片分享、新闻推荐类、商品推荐等。
-   

上面两种是最典型，也是最常见的分类方式，另外的话，也有其他的分类标准，在其他的分类标准中的话，会多出两种类型：

-   Aggregate：聚合类型，比如好几个朋友都看了同一场电影，这个就可以聚合为一条Feed：A，B，C看了电影《你的名字》，这种聚合功能比较适合在客户端做。一般的Aggregate类型是Timeline类型 + 客户端聚合。
-   Notice：通知类型，这种其实已经是功能类型了，通知类型一般用于APP中的各种通知，私信等常见。这种也是Timeline类型，或者是Aggregate类型。



**实现：**



核心：存储、推送



存储（账号关系、内容）：

-   如何能支持100TB，甚至PB级数据量？
-   数据量大了后成本就很关键，成本如何能更便宜？
-   如何保证账号关系和Feed不丢失？



推送：

-   如何才能提供千万的TPS和QPS？
-   如何保证读写延迟在10ms，甚至2ms以下？
-   如何保证Feed的必达性？



同步：