### 架构设计

- 需求分析和整理
    - 梳理所有用例和场景，并抽象出系统面线的用户和角色，梳理对于每个用户和角色应该提供的功能需求、非功能质量需求和限制
    - 非功能质量
        - 高可用性
        - 高性能
        - 可伸缩
        - 可扩展
        - 安全性
        - 稳定性
        - 健壮性
        - 可测试性


- 概要设计
    - 根据需求分析和整理阶段产生的核心需求和特色需求，对整个系统模块划分，并定义良好的模块之间的关系和交互。


- 详细设计
    - 使用多视图的方法描述系统的架构
        - 数据视图
        - 逻辑视图
        - 开发视图
        - 进程视图
        - 物理视图
        - 性能视图
        - 安全视图


### 互联网架构权衡分析方法（ATAM）
    - ATAM方法论：能够在项目实施之前评估架构是否能够满足这些非功能质量的方法论


### 全面的非功能质量要求

- 核心的非功能质量指标
    - 高性能
    - 可用性（持续可用、缩短宕机时间、出错恢复、可靠性）
    - 可伸缩行（垂直伸缩、水平伸缩）
    - 可扩展（可插拔、组件重用）
    - 安全性（数据安全、加密、熔断、防攻击）
    
- 非功能质量需求的具体指标
    - 应用服务器
        - 部署结构
            - 负载均衡策略
            - 高可用
            - i/o模型
            - 线程池模型
            - 是否业务混合部署
        - 容量和性能
            - 每日请求量
            - qps
            - 各个接口的访问峰值
            - 最大请求耗时
            - 在线用户量
            - 请求的大小
            - 网卡的i/o流量
            - 磁盘负载
            - 内存、cpu使用量
        - 其他
            - gc
            - 
    - 数据库
         - 部署结构
            - 复制模型
            - 失效、容灾、归档策略
            - 读写分离
            - 分库、分表
            - 静态数据、半静态数据是否使用缓存
            - 缓存穿透、缓存失效、缓存预热等
        - 容量和性能
            - 总容量
            - 每日增量
            - 读写峰值
            - 事务量峰值
        - 其他
            - 索引设计
            - 是否有多表关联、关联是否用到索引
            - 事务和一致性级别
            - 是否有大数据查询、范围查询
            - 有没有使用的悲观锁、是否可以改造成乐观锁、是否可以利用数据库内置的行级锁
            - 伸缩策略（分区、时间分区、水平分库分表）
    - 缓存
         - 部署结构
            - 复制模型
            - 失效转移
            - 持久化策略
            - 淘汰策略
            - 线程模型
            - 预热方法
            - 哈希分片策略
        - 容量和性能
            - 缓存内容大小、数量、过期时间、数据结构
            - 读写峰值
        - 其他
            - 冷热数据对比
            - 是否可能缓存穿透、是否有大对象
            - 
    - 消息队列
        - 部署结构
            - 复制模型
            - 持久化
            - 失效转移
        - 容量和性能
            - 数据增量
            - 持久化过期时间
            - 读写峰值
            - 消息体大小
            - 延迟
        - 其他
            - 消息投递的可靠性
            - 消费者的处理流程和持久机制